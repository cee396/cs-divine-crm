(()=>{var e={};e.id=676,e.ids=[676],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1899:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>m,pages:()=>n,routeModule:()=>x,tree:()=>o}),r(1678),r(1619),r(1363);var t=r(6576),a=r(2007),l=r(1818),i=r.n(l),d=r(8897),c={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>d[e]);r.d(s,c);let o=["",{children:["upload",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,1678)),"/home/ubuntu/tax-deed-crm-enterprise/app/app/upload/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,1619)),"/home/ubuntu/tax-deed-crm-enterprise/app/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,1363,23)),"next/dist/client/components/not-found-error"]}],n=["/home/ubuntu/tax-deed-crm-enterprise/app/app/upload/page.tsx"],m="/upload/page",p={require:r,loadChunk:()=>Promise.resolve()},x=new t.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/upload/page",pathname:"/upload",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},2441:(e,s,r)=>{Promise.resolve().then(r.bind(r,2570))},2570:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>x});var t=r(2901),a=r(4383),l=r(8420),i=r(1464),d=r(2317),c=r(2594),o=r(3094);let n=(0,r(1945).Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);var m=r(7878),p=r(437);function x(){let[e,s]=(0,a.useState)({status:"idle",progress:0,totalRecords:0,successRecords:0,errorRecords:0}),[r,x]=(0,a.useState)(null),u=(0,a.useRef)(null),{toast:h}=(0,p.pm)(),g=async()=>{if(r){s({status:"uploading",progress:10,totalRecords:0,successRecords:0,errorRecords:0,filename:r.name});try{let e=new FormData;e.append("file",r);let t=await fetch("/api/upload-csv",{method:"POST",body:e});if(!t.ok)throw Error(`Upload failed: ${t.statusText}`);let a=await t.json();if(a.success)s({status:"completed",progress:100,totalRecords:a.totalRecords,successRecords:a.successRecords,errorRecords:a.errorRecords,errors:a.errors,filename:r.name}),h({title:"Upload Successful",description:`${a.successRecords} leads imported successfully!`});else throw Error(a.error||"Upload failed")}catch(e){console.error("Upload error:",e),s({status:"error",progress:0,totalRecords:0,successRecords:0,errorRecords:0,errors:[e instanceof Error?e.message:"Unknown error occurred"]}),h({title:"Upload Failed",description:e instanceof Error?e.message:"Unknown error occurred",variant:"destructive"})}}},j=()=>{x(null),s({status:"idle",progress:0,totalRecords:0,successRecords:0,errorRecords:0}),u.current&&(u.current.value="")};return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[t.jsx(l.default,{}),(0,t.jsxs)("main",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[t.jsx(i.Z,{className:"h-8 w-8 text-primary"}),t.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Upload Leads"})]}),t.jsx("p",{className:"text-gray-600",children:'Import tax deed leads from CSV files. All leads will be automatically marked as "New Lead" status.'})]}),(0,t.jsxs)("div",{className:"enterprise-card p-8",children:["idle"===e.status&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{onDrop:e=>{e.preventDefault();let r=e.dataTransfer.files[0];if(r){if("text/csv"!==r.type&&!r.name.endsWith(".csv")){h({title:"Invalid File Type",description:"Please select a CSV file.",variant:"destructive"});return}if(r.size>52428800){h({title:"File Too Large",description:"Please select a file smaller than 50MB.",variant:"destructive"});return}x(r),s({status:"idle",progress:0,totalRecords:0,successRecords:0,errorRecords:0})}},onDragOver:e=>{e.preventDefault()},className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-primary transition-colors cursor-pointer",onClick:()=>u.current?.click(),children:[t.jsx(i.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:r?r.name:"Upload CSV File"}),t.jsx("p",{className:"text-gray-600 mb-4",children:r?`File size: ${(r.size/1024/1024).toFixed(2)} MB`:"Drag and drop your CSV file here, or click to browse"}),t.jsx("p",{className:"text-sm text-gray-500",children:"Supports FL Counties format with 153+ fields. Maximum file size: 50MB"})]}),t.jsx("input",{ref:u,type:"file",accept:".csv",onChange:e=>{let r=e.target.files?.[0];if(r){if("text/csv"!==r.type&&!r.name.endsWith(".csv")){h({title:"Invalid File Type",description:"Please select a CSV file.",variant:"destructive"});return}if(r.size>52428800){h({title:"File Too Large",description:"Please select a file smaller than 50MB.",variant:"destructive"});return}x(r),s({status:"idle",progress:0,totalRecords:0,successRecords:0,errorRecords:0})}},className:"hidden"}),r&&(0,t.jsxs)("div",{className:"mt-6 flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[t.jsx(d.Z,{className:"h-5 w-5 text-primary"}),t.jsx("span",{className:"font-medium",children:r.name}),t.jsx(m.z,{variant:"ghost",size:"sm",onClick:j,children:t.jsx(c.Z,{className:"h-4 w-4"})})]}),t.jsx(m.z,{onClick:g,className:"px-8",children:"Upload & Process"})]})]}),("uploading"===e.status||"processing"===e.status)&&(0,t.jsxs)("div",{className:"text-center",children:[t.jsx("div",{className:"enterprise-spinner mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"uploading"===e.status?"Uploading...":"Processing..."}),t.jsx("p",{className:"text-gray-600 mb-4",children:e.filename}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:t.jsx("div",{className:"bg-primary h-2 rounded-full transition-all duration-300",style:{width:`${e.progress}%`}})}),(0,t.jsxs)("p",{className:"text-sm text-gray-500 mt-2",children:[e.progress,"% complete"]})]}),"completed"===e.status&&(0,t.jsxs)("div",{className:"text-center",children:[t.jsx(o.Z,{className:"h-16 w-16 text-green-600 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Upload Completed!"}),t.jsx("p",{className:"text-gray-600 mb-6",children:e.filename}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,t.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[t.jsx("p",{className:"text-2xl font-bold text-blue-600",children:e.totalRecords}),t.jsx("p",{className:"text-sm text-blue-800",children:"Total Records"})]}),(0,t.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[t.jsx("p",{className:"text-2xl font-bold text-green-600",children:e.successRecords}),t.jsx("p",{className:"text-sm text-green-800",children:"Successfully Imported"})]}),(0,t.jsxs)("div",{className:"bg-red-50 p-4 rounded-lg",children:[t.jsx("p",{className:"text-2xl font-bold text-red-600",children:e.errorRecords}),t.jsx("p",{className:"text-sm text-red-800",children:"Errors"})]})]}),e.errors&&e.errors.length>0&&(0,t.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:[t.jsx("h4",{className:"font-medium text-yellow-800 mb-2",children:"Import Warnings:"}),(0,t.jsxs)("ul",{className:"text-sm text-yellow-700 space-y-1",children:[e.errors.slice(0,5).map((e,s)=>(0,t.jsxs)("li",{children:["• ",e]},s)),e.errors.length>5&&(0,t.jsxs)("li",{children:["• And ",e.errors.length-5," more..."]})]})]}),(0,t.jsxs)("div",{className:"space-x-4",children:[t.jsx(m.z,{onClick:j,variant:"outline",children:"Upload Another File"}),t.jsx(m.z,{asChild:!0,children:t.jsx("a",{href:"/leads",children:"View Leads"})})]})]}),"error"===e.status&&(0,t.jsxs)("div",{className:"text-center",children:[t.jsx(n,{className:"h-16 w-16 text-red-600 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Upload Failed"}),e.errors&&e.errors.length>0&&t.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:t.jsx("ul",{className:"text-sm text-red-700 space-y-1",children:e.errors.map((e,s)=>(0,t.jsxs)("li",{children:["• ",e]},s))})}),t.jsx(m.z,{onClick:j,children:"Try Again"})]})]}),(0,t.jsxs)("div",{className:"mt-8 enterprise-card p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"CSV Upload Instructions"}),(0,t.jsxs)("div",{className:"space-y-3 text-sm text-gray-700",children:[(0,t.jsxs)("p",{children:[t.jsx("strong",{children:"Supported Format:"})," FL Counties CSV format with up to 153+ fields"]}),(0,t.jsxs)("p",{children:[t.jsx("strong",{children:"File Requirements:"})," CSV file format (.csv), maximum 50MB"]}),(0,t.jsxs)("p",{children:[t.jsx("strong",{children:"Lead Status:"}),' All imported leads will be automatically set to "New Lead" status']}),(0,t.jsxs)("p",{children:[t.jsx("strong",{children:"Duplicate Handling:"})," Duplicate records (same parcel ID) will be skipped"]}),(0,t.jsxs)("p",{children:[t.jsx("strong",{children:"Required Fields:"})," At minimum, property address or parcel ID should be present"]})]})]})]})]})}},3094:(e,s,r)=>{"use strict";r.d(s,{Z:()=>t});let t=(0,r(1945).Z)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},2317:(e,s,r)=>{"use strict";r.d(s,{Z:()=>t});let t=(0,r(1945).Z)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},1678:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>t});let t=(0,r(8895).createProxy)(String.raw`/home/ubuntu/tax-deed-crm-enterprise/app/app/upload/page.tsx#default`)}};var s=require("../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[372,666,61,174],()=>r(1899));module.exports=t})();