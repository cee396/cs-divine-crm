(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[676],{1917:function(e,t,s){Promise.resolve().then(s.bind(s,2478))},2478:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return x}});var r=s(5444),a=s(9300),n=s(9708),l=s(4805),i=s(6771),o=s(3485),c=s(6124);let d=(0,s(2154).Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);var u=s(2422),m=s(5854);function x(){let[e,t]=(0,a.useState)({status:"idle",progress:0,totalRecords:0,successRecords:0,errorRecords:0}),[s,x]=(0,a.useState)(null),p=(0,a.useRef)(null),{toast:h}=(0,m.pm)(),f=async()=>{if(s){t({status:"uploading",progress:10,totalRecords:0,successRecords:0,errorRecords:0,filename:s.name});try{let e=new FormData;e.append("file",s);let r=await fetch("/api/upload-csv",{method:"POST",body:e});if(!r.ok)throw Error("Upload failed: ".concat(r.statusText));let a=await r.json();if(a.success)t({status:"completed",progress:100,totalRecords:a.totalRecords,successRecords:a.successRecords,errorRecords:a.errorRecords,errors:a.errors,filename:s.name}),h({title:"Upload Successful",description:"".concat(a.successRecords," leads imported successfully!")});else throw Error(a.error||"Upload failed")}catch(e){console.error("Upload error:",e),t({status:"error",progress:0,totalRecords:0,successRecords:0,errorRecords:0,errors:[e instanceof Error?e.message:"Unknown error occurred"]}),h({title:"Upload Failed",description:e instanceof Error?e.message:"Unknown error occurred",variant:"destructive"})}}},g=()=>{x(null),t({status:"idle",progress:0,totalRecords:0,successRecords:0,errorRecords:0}),p.current&&(p.current.value="")};return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)(n.default,{}),(0,r.jsxs)("main",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,r.jsx)(l.Z,{className:"h-8 w-8 text-primary"}),(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Upload Leads"})]}),(0,r.jsx)("p",{className:"text-gray-600",children:'Import tax deed leads from CSV files. All leads will be automatically marked as "New Lead" status.'})]}),(0,r.jsxs)("div",{className:"enterprise-card p-8",children:["idle"===e.status&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{onDrop:e=>{e.preventDefault();let s=e.dataTransfer.files[0];if(s){if("text/csv"!==s.type&&!s.name.endsWith(".csv")){h({title:"Invalid File Type",description:"Please select a CSV file.",variant:"destructive"});return}if(s.size>52428800){h({title:"File Too Large",description:"Please select a file smaller than 50MB.",variant:"destructive"});return}x(s),t({status:"idle",progress:0,totalRecords:0,successRecords:0,errorRecords:0})}},onDragOver:e=>{e.preventDefault()},className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-primary transition-colors cursor-pointer",onClick:()=>{var e;return null===(e=p.current)||void 0===e?void 0:e.click()},children:[(0,r.jsx)(l.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:s?s.name:"Upload CSV File"}),(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:s?"File size: ".concat((s.size/1024/1024).toFixed(2)," MB"):"Drag and drop your CSV file here, or click to browse"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Supports FL Counties format with 153+ fields. Maximum file size: 50MB"})]}),(0,r.jsx)("input",{ref:p,type:"file",accept:".csv",onChange:e=>{var s;let r=null===(s=e.target.files)||void 0===s?void 0:s[0];if(r){if("text/csv"!==r.type&&!r.name.endsWith(".csv")){h({title:"Invalid File Type",description:"Please select a CSV file.",variant:"destructive"});return}if(r.size>52428800){h({title:"File Too Large",description:"Please select a file smaller than 50MB.",variant:"destructive"});return}x(r),t({status:"idle",progress:0,totalRecords:0,successRecords:0,errorRecords:0})}},className:"hidden"}),s&&(0,r.jsxs)("div",{className:"mt-6 flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)(i.Z,{className:"h-5 w-5 text-primary"}),(0,r.jsx)("span",{className:"font-medium",children:s.name}),(0,r.jsx)(u.z,{variant:"ghost",size:"sm",onClick:g,children:(0,r.jsx)(o.Z,{className:"h-4 w-4"})})]}),(0,r.jsx)(u.z,{onClick:f,className:"px-8",children:"Upload & Process"})]})]}),("uploading"===e.status||"processing"===e.status)&&(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"enterprise-spinner mx-auto mb-4"}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"uploading"===e.status?"Uploading...":"Processing..."}),(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:e.filename}),(0,r.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,r.jsx)("div",{className:"bg-primary h-2 rounded-full transition-all duration-300",style:{width:"".concat(e.progress,"%")}})}),(0,r.jsxs)("p",{className:"text-sm text-gray-500 mt-2",children:[e.progress,"% complete"]})]}),"completed"===e.status&&(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(c.Z,{className:"h-16 w-16 text-green-600 mx-auto mb-4"}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Upload Completed!"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6",children:e.filename}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,r.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,r.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:e.totalRecords}),(0,r.jsx)("p",{className:"text-sm text-blue-800",children:"Total Records"})]}),(0,r.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[(0,r.jsx)("p",{className:"text-2xl font-bold text-green-600",children:e.successRecords}),(0,r.jsx)("p",{className:"text-sm text-green-800",children:"Successfully Imported"})]}),(0,r.jsxs)("div",{className:"bg-red-50 p-4 rounded-lg",children:[(0,r.jsx)("p",{className:"text-2xl font-bold text-red-600",children:e.errorRecords}),(0,r.jsx)("p",{className:"text-sm text-red-800",children:"Errors"})]})]}),e.errors&&e.errors.length>0&&(0,r.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:[(0,r.jsx)("h4",{className:"font-medium text-yellow-800 mb-2",children:"Import Warnings:"}),(0,r.jsxs)("ul",{className:"text-sm text-yellow-700 space-y-1",children:[e.errors.slice(0,5).map((e,t)=>(0,r.jsxs)("li",{children:["• ",e]},t)),e.errors.length>5&&(0,r.jsxs)("li",{children:["• And ",e.errors.length-5," more..."]})]})]}),(0,r.jsxs)("div",{className:"space-x-4",children:[(0,r.jsx)(u.z,{onClick:g,variant:"outline",children:"Upload Another File"}),(0,r.jsx)(u.z,{asChild:!0,children:(0,r.jsx)("a",{href:"/leads",children:"View Leads"})})]})]}),"error"===e.status&&(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(d,{className:"h-16 w-16 text-red-600 mx-auto mb-4"}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Upload Failed"}),e.errors&&e.errors.length>0&&(0,r.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:(0,r.jsx)("ul",{className:"text-sm text-red-700 space-y-1",children:e.errors.map((e,t)=>(0,r.jsxs)("li",{children:["• ",e]},t))})}),(0,r.jsx)(u.z,{onClick:g,children:"Try Again"})]})]}),(0,r.jsxs)("div",{className:"mt-8 enterprise-card p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"CSV Upload Instructions"}),(0,r.jsxs)("div",{className:"space-y-3 text-sm text-gray-700",children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Supported Format:"})," FL Counties CSV format with up to 153+ fields"]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"File Requirements:"})," CSV file format (.csv), maximum 50MB"]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Lead Status:"}),' All imported leads will be automatically set to "New Lead" status']}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Duplicate Handling:"})," Duplicate records (same parcel ID) will be skipped"]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Required Fields:"})," At minimum, property address or parcel ID should be present"]})]})]})]})]})}},9708:function(e,t,s){"use strict";s.d(t,{default:function(){return R}});var r=s(5444),a=s(9300),n=s(1084),l=s(9047),i=s(6378),o=s(4624),c=s(4805),d=s(8510),u=s(2019),m=s(8503),x=s(2422),p=s(1226),h=s(2371),f=s(3485),g=s(5522);let y=p.fC,b=p.xz;p.x8;let j=p.h_,v=(0,h.j)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),N=a.forwardRef((e,t)=>{let{side:s="right",className:a,children:n,...l}=e;return(0,r.jsxs)(j,{children:[(0,r.jsx)(w,{}),(0,r.jsxs)(p.VY,{ref:t,className:(0,g.cn)(v({side:s}),a),...l,children:[n,(0,r.jsxs)(p.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,r.jsx)(f.Z,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});N.displayName=p.VY.displayName;let w=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(p.aV,{className:(0,g.cn)("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...a,ref:t})});w.displayName=p.aV.displayName,a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(p.Dx,{ref:t,className:(0,g.cn)("text-lg font-semibold text-foreground",s),...a})}).displayName=p.Dx.displayName,a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(p.dk,{ref:t,className:(0,g.cn)("text-sm text-muted-foreground",s),...a})}).displayName=p.dk.displayName;let k=[{name:"Dashboard",href:"/",icon:i.Z},{name:"Leads",href:"/leads",icon:o.Z},{name:"Upload",href:"/upload",icon:c.Z},{name:"Call Logs",href:"/calls",icon:d.Z}];function R(){let[e,t]=(0,a.useState)(!1),s=(0,l.usePathname)();return(0,r.jsx)("header",{className:"sticky top-0 z-50 w-full border-b bg-white/95 backdrop-blur supports-[backdrop-filter]:bg-white/60",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,r.jsx)("div",{className:"flex items-center",children:(0,r.jsxs)(n.default,{href:"/",className:"flex items-center space-x-2",children:[(0,r.jsx)(u.Z,{className:"h-8 w-8 text-primary"}),(0,r.jsx)("span",{className:"text-xl font-bold text-gray-900",children:"Tax Deed CRM"})]})}),(0,r.jsx)("nav",{className:"hidden md:flex space-x-8",children:k.map(e=>{let t=s===e.href;return(0,r.jsxs)(n.default,{href:e.href,className:"flex items-center space-x-2 px-3 py-2 rounded-md text-sm font-medium transition-colors ".concat(t?"bg-primary text-primary-foreground":"text-gray-700 hover:text-primary hover:bg-gray-50"),children:[(0,r.jsx)(e.icon,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:e.name})]},e.name)})}),(0,r.jsx)("div",{className:"md:hidden",children:(0,r.jsxs)(y,{open:e,onOpenChange:t,children:[(0,r.jsx)(b,{asChild:!0,children:(0,r.jsx)(x.z,{variant:"ghost",size:"icon",children:(0,r.jsx)(m.Z,{className:"h-6 w-6"})})}),(0,r.jsx)(N,{side:"right",className:"w-[300px] sm:w-[400px]",children:(0,r.jsx)("div",{className:"flex flex-col space-y-4 mt-8",children:k.map(e=>{let a=s===e.href;return(0,r.jsxs)(n.default,{href:e.href,onClick:()=>t(!1),className:"flex items-center space-x-3 px-3 py-2 rounded-md text-base font-medium transition-colors ".concat(a?"bg-primary text-primary-foreground":"text-gray-700 hover:text-primary hover:bg-gray-50"),children:[(0,r.jsx)(e.icon,{className:"h-5 w-5"}),(0,r.jsx)("span",{children:e.name})]},e.name)})})})]})})]})})})}},2422:function(e,t,s){"use strict";s.d(t,{z:function(){return c}});var r=s(5444),a=s(9300),n=s(223),l=s(2371),i=s(5522);let o=(0,l.j)("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef((e,t)=>{let{className:s,variant:a,size:l,asChild:c=!1,...d}=e,u=c?n.g7:"button";return(0,r.jsx)(u,{className:(0,i.cn)(o({variant:a,size:l,className:s})),ref:t,...d})});c.displayName="Button"},5854:function(e,t,s){"use strict";s.d(t,{pm:function(){return m}});var r=s(9300);let a=0,n=new Map,l=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},i=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?l(s):e.toasts.forEach(e=>{l(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},o=[],c={toasts:[]};function d(e){c=i(c,e),o.forEach(e=>{e(c)})}function u(e){let{...t}=e,s=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>d({type:"DISMISS_TOAST",toastId:s});return d({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||r()}}}),{id:s,dismiss:r,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function m(){let[e,t]=r.useState(c);return r.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},5522:function(e,t,s){"use strict";s.d(t,{_$:function(){return c},cn:function(){return n},un:function(){return i},xG:function(){return l},z2:function(){return o}});var r=s(2191),a=s(3607);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.m6)((0,r.W)(t))}function l(e){return null==e?"$0":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(e)}function i(e){if(!e)return"";let t=e.replace(/\D/g,"");return 10===t.length?"(".concat(t.slice(0,3),") ").concat(t.slice(3,6),"-").concat(t.slice(6)):11===t.length&&"1"===t[0]?"+1 (".concat(t.slice(1,4),") ").concat(t.slice(4,7),"-").concat(t.slice(7)):e}function o(e){switch(null==e?void 0:e.toLowerCase()){case"new lead":return"bg-blue-100 text-blue-800";case"contacted":return"bg-yellow-100 text-yellow-800";case"qualified":return"bg-green-100 text-green-800";case"closed":default:return"bg-gray-100 text-gray-800";case"not interested":return"bg-red-100 text-red-800"}}function c(e){switch(null==e?void 0:e.toLowerCase()){case"high":return"bg-red-100 text-red-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}}},6124:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(2154).Z)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},6771:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(2154).Z)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])}},function(e){e.O(0,[428,980,386,156,744],function(){return e(e.s=1917)}),_N_E=e.O()}]);